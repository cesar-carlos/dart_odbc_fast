---
description: Null safety best practices for Dart
globs: ["lib/**/*.dart"]
alwaysApply: true
---

# Null Safety Best Practices

## Principles

- Default to non-nullable types.
- Use nullable (`T?`) only when null is part of the domain model.
- Prefer explicit handling (`if`, `??`, `?.`) over force unwrap (`!`).
- Use default values where appropriate.

## Type and API Design

- Prefer required named parameters for mandatory values.
- Return nullable values only when callers can handle absence safely.
- Document nullable contracts in public APIs.

## Safe Patterns

```dart
final String name = user.name;
final String displayName = user.nickname ?? 'Unknown';
final int count = items?.length ?? 0;
```

## Avoid

```dart
// Avoid force unwrap unless proven safe in the same scope.
final int size = maybeList!.length;
```

## Checklist

- [ ] Nullable types are intentional.
- [ ] Force unwrap (`!`) is justified and rare.
- [ ] Public API null behavior is documented.
- [ ] Defaults were used where they improve safety.
