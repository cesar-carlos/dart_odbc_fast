
# Project Documentation

This directory contains only canonical documents for day-to-day use by contributors and maintainers.

## Quick Guide

| Document                                                       | Purpose                                                                   |
| -------------------------------------------------------------- | ------------------------------------------------------------------------- |
| [BUILD.md](BUILD.md)                                           | Local setup, Rust build, optional bindings generation, and test execution |
| [TROUBLESHOOTING.md](TROUBLESHOOTING.md)                       | Diagnostics and fixes for common build, runtime, and CI issues            |
| [RELEASE_AUTOMATION.md](RELEASE_AUTOMATION.md)                 | Release process with tags + GitHub Actions + pub.dev publishing           |
| [VERSIONING_STRATEGY.md](VERSIONING_STRATEGY.md)               | Official versioning and deprecation policy                                |
| [VERSIONING_QUICK_REFERENCE.md](VERSIONING_QUICK_REFERENCE.md) | Short reference for version bump decisions                                |
| [CHANGELOG_TEMPLATE.md](CHANGELOG_TEMPLATE.md)                 | Standard template for updating \`CHANGELOG.md\`                             |
| [OBSERVABILITY.md](OBSERVABILITY.md)                           | Telemetry, operational metrics, and exporter fallback                     |
| [TYPE_MAPPING.md](TYPE_MAPPING.md)                             | Canonical data type mapping contract, limits, and implementation roadmap  |
| [FUTURE_IMPLEMENTATIONS.md](FUTURE_IMPLEMENTATIONS.md)         | Consolidated and prioritized technical backlog                            |
| [CHANGELOG.md](CHANGELOG.md)                                   | Version history, deprecations, and migration guide                             |

## Generated Documentation

- \`doc/api/\` contains artifacts generated by \`dart doc\`.
- Do not manually edit files inside \`doc/api/\`.

## Technical Notes

- \`doc/notes/\` stores supporting notes and point-in-time investigations.
- Files in \`doc/notes/\` do not replace canonical documents.

## Maintenance Rules

1. Avoid creating parallel documents for the same topic. Update to the canonical document.
2. When a document becomes historical, remove it from index and delete the file.
3. Always validate internal links after major edits.
4. For release/versioning changes, keep \`pubspec.yaml\`, \`CHANGELOG.md\`, and docs synchronized.

## Current performance/reliability plan

- [NULL_HANDLING_RELIABILITY_PERFORMANCE_PLAN.md](notes/NULL_HANDLING_RELIABILITY_PERFORMANCE_PLAN.md)

## Bulk Insert Nullability

Starting from v1.0.3, the \`BulkInsertBuilder\` validates that non-nullable columns do not contain \`null\` values at build time.

**Behavior Change:**
- **Before:** Non-nullable columns accepted \`null\` and serialized default values
- **After:** Non-nullable columns now throw \`StateError\` with clear message
- **Nullable columns:** Continue to use null bitmap correctly

**Usage:**

For columns that should accept null values, use \`nullable: true\`:

\`\`\`dart
// Non-nullable column - will throw error on null
final builder = BulkInsertBuilder()
  ..table('users')
  ..addColumn('id', BulkColumnType.i32)
  ..addColumn('name', BulkColumnType.i32)
  ..addRow([1, 'Alice']); // Error: 'Column "id" is non-nullable but contains null at row 2'

// Nullable column - accepts null correctly
final builder = BulkInsertBuilder()
  ..table('users')
  ..addColumn('id', BulkColumnType.i32, nullable: true) // Column can be null
  ..addColumn('name', BulkColumnType.text, maxLen: 100, nullable: true)
  ..addRow([1, 'Alice'])
  ..addRow([null, 'Bob']); // Works: 'Bob' is null, column is nullable
  ..build();
\`\`\`

**Error Message:**

\`\`\`
Column "${spec.name}" is non-nullable but contains null at row ${r + 1}. 
Use nullable: true for columns that should accept null.
\`\`\`

See [TROUBLESHOOTING.md](TROUBLESHOOTING.md) for more troubleshooting guidance.

